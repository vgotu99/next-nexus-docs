---
title: nexusCache
description: 고급 사용 사례를 위한 클라이언트 캐시 직접 접근.
---

# nexusCache

```ts path=null start=null
import { nexusCache } from 'next-nexus/client'
import { productDefinition } from '@/api/productDefinition'

const cache = nexusCache(productDefinition.list)

const current = cache.get()
cache.set(prev => (prev ? [...prev] : prev))
cache.invalidate()
const unsubscribe = cache.subscribe(data => { /* 변경 감지 */ })
```

> 제한 사항
> - GET 전용입니다. GET이 아닌 Definition으로 호출하면 예외가 발생합니다: "nexusCache only supports GET definitions".
> - 광범위한 갱신은 태그 재검증을 우선하세요. `nexusCache`는 낙관적 UI 등 고급 사례에만 사용하세요.

## 낙관적 업데이트 패턴
```tsx path=null start=null
'use client'
import { useNexusMutation } from 'next-nexus/client'
import { nexusCache } from 'next-nexus/client'
import { todosDefinition } from '@/definitions'

export function AddTodo() {
  const listCache = nexusCache(todosDefinition.list)
  const { mutate, isPending } = useNexusMutation(
    (input: { title: string }) => todosDefinition.create(input),
    {
      onStart: (input) => {
        listCache.set(prev => (prev ? [{ id: '__temp__', title: input.title }, ...prev] : prev))
      },
      onError: () => {
        // 롤백: 무효화 또는 임시 항목 제거
        listCache.invalidate()
      },
    }
  )
  return <button onClick={() => mutate({ title: 'New' })} disabled={isPending}>Add</button>
}
```

## API
- get(): T | undefined
- set(updater: (old: T | undefined) => T): void
- remove(): void
- invalidate(): void
- isStale(): boolean
- subscribe(fn: (data: T | undefined) => void): () => void

