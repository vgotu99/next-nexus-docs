---
title: NexusHydrationBoundary & withNexusHydrationBoundary
description: 서버에서 가져온 데이터를 클라이언트 하이드레이션을 위해 수집합니다.
---

# NexusHydrationBoundary & withNexusHydrationBoundary

서버 전용 API로, 서버 렌더링 중 `nexus()` 호출 결과를 수집해 클라이언트 하이드레이션을 위한 페이로드로 직렬화합니다.

## Import

```ts path=null start=null
import { NexusHydrationBoundary } from 'next-nexus/server';
import { withNexusHydrationBoundary } from 'next-nexus/server';
```

## 역할
- 감싼 서브트리 내의 `nexus()` 결과를 서버 렌더링 시 수집합니다.
- 직렬화된 하이드레이션 페이로드를 생성하여 클라이언트로 전달합니다.
- 클라이언트의 `NexusRuntime`과 연계되어 인메모리 캐시를 초기화합니다.

## 사용 패턴

### 1) 세그먼트 레이아웃 컴포넌트
세그먼트의 `layout.tsx`를 감싸, 해당 세그먼트의 모든 페이지에서 하이드레이션을 활성화합니다.

```tsx path=null start=null
// app/products/layout.tsx
import { NexusHydrationBoundary } from 'next-nexus/server';

export default function ProductsLayout({ children }: { children: React.ReactNode }) {
  return <NexusHydrationBoundary>{children}</NexusHydrationBoundary>;
}
```

### 2) 페이지 HOC
별도 `layout.tsx`가 필요 없고 특정 `page.tsx`에만 하이드레이션이 필요할 때 사용합니다.

```tsx path=null start=null
// app/dashboard/page.tsx
import { withNexusHydrationBoundary } from 'next-nexus/server';

async function DashboardPage() {
  // ... 서버 로직 및 nexus(...)
  return <div>Dashboard</div>;
}

export default withNexusHydrationBoundary(DashboardPage);
```

## 선택 가이드
- 동일 세그먼트의 여러 페이지가 하이드레이션이 필요 → 레이아웃 컴포넌트 권장
- 단일 페이지만 하이드레이션 필요하고 레이아웃 추가가 보일러플레이트 → 페이지 HOC 권장
- 동일 렌더 경로에 레이아웃 경계와 페이지 HOC를 동시에 적용하지 마세요.