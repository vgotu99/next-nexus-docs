---
title: NexusProvider
description: 서버/클라이언트 간 하이드레이션과 클라이언트 초기화를 활성화합니다.
---

# NexusProvider

앱을 `NexusProvider`로 감싸면 서버↔클라이언트 하이드레이션과 클라이언트 초기화가 활성화됩니다.

## 사용법
```tsx path=null start=null
// app/layout.tsx
import { NexusProvider } from 'next-nexus'

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="ko">
      <body>
        <NexusProvider>{children}</NexusProvider>
      </body>
    </html>
  )
}
```

## 서버(요청 단위)
- 들어오는 `x-nexus-client-cache` 헤더(존재 시)를 읽어 하이드레이션 수행/스킵(ETag 일치), `<NexusSuspense>`와의 위임 여부를 판단합니다.
- `client` 옵션이 포함된 GET 요청 처리 후, 하이드레이션 엔트리(데이터/태그/TTL/선택한 헤더)를 수집하고, ETag 일치 시 `notModifiedKeys`를 결정합니다.
- 클라이언트 복원을 위해 HTML에 스크립트를 주입합니다:
  ```js path=null start=null
  window.__NEXUS_PAYLOAD__ = { hydrationData, notModifiedKeys }
  ```

## 클라이언트
- 마운트 시 하이드레이션: `hydrationData` 복원, `notModifiedKeys`는 데이터 재전송 없이 TTL만 연장, 개발 모드 로그 출력 후 스크립트 제거.
- 요청 시 헤더 삽입(RSC 전용): `fetch`를 가볍게 가로채, **캐시 후보가 될 수 있는 항목들의** TTL/ETag 메타데이터를 `x-nexus-client-cache` 헤더에 담아 전송합니다. 이를 통해 서버는 더 스마트한 결정을 내릴 수 있습니다. 헤더는 대략 8KB 한도가 있으며, 초과 시 내부적으로 안전하게 잘라 처리합니다.
- `maxSize` prop으로 캐시 LRU 크기를 제어할 수 있습니다(기본값 200).

## 페이로드 형태
```json path=null start=null
{
  "hydrationData": {
    "GET:/products|tags:products": {
      "data": [{"id":"1","name":"A"}],
      "clientRevalidate": 300,
      "clientTags": ["products"],
      "serverTags": ["products"],
      "etag": "W/\"abc\"",
      "headers": { "x-total-count": "42" }
    }
  },
  "notModifiedKeys": ["GET:/products|tags:products"]
}
```

## Props
- `maxSize?: number` — 클라이언트 캐시 LRU 최대 크기(기본값 존재)

## 팁
- 개발 로그 활성화: `.env.local`에 `NEXT_PUBLIC_NEXUS_DEBUG=true`
- 태그를 일관되게 부여해 서버/클라이언트 재검증을 정밀하게 수행하세요.

## 함께 보기
- [Definitions](/ko/api/definitions)
- [nexus](/ko/api/nexus)
- [Revalidation](/ko/api/revalidation)

## 내비게이션
- 돌아가기: [빠른 시작](/ko/getting-started)
- 다음: [Definitions](/ko/api/definitions) → [useNexusQuery](/ko/api/hooks/use-nexus-query)

