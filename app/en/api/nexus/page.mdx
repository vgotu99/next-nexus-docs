---
title: nexus
description: Server-side data fetching with hydration, retries/timeouts, and interceptors.
---

# nexus

Import:

```ts path=null start=null
import { withNexusHydrationBoundary, nexus } from 'next-nexus/server';
```

## Signature

```ts path=null start=null
nexus<T>(definition: NexusDefinition<T>): Promise<NexusResponse<T>>
```

## Examples

Minimal HOC example in a segment without layout:
```tsx path=null start=null
// app/(shop)/products/page.tsx
import { withNexusHydrationBoundary, nexus } from 'next-nexus/server';
import { productDefinition } from '@/api/productDefinition';

async function ProductsPage() {
  const { data: products, headers } = await nexus(productDefinition.list);
  const total = headers.get('x-total-count');
  return (
    <div>
      <h1>Products ({total ?? 'n/a'})</h1>
      <ul>{products?.map(p => <li key={p.id}>{p.name}</li>)}</ul>
    </div>
  );
}

export default withNexusHydrationBoundary(ProductsPage);
```

Multiple requests with an auth interceptor:
```tsx path=null start=null
// app/(shop)/dashboard/page.tsx
import { withNexusHydrationBoundary, nexus } from 'next-nexus/server';
import { productDefinition } from '@/api/productDefinition';
import { createDefinition } from '@/api/nexusDefinition';

const stats = createDefinition<{ users: number; orders: number }>({
  method: 'GET', endpoint: '/stats', interceptors: ['auth'],
  server: { revalidate: 300, tags: ['stats'] },
});

async function DashboardPage() {
  const [productsRes, statsRes] = await Promise.all([
    nexus(productDefinition.list),
    nexus(stats),
  ]);
  return (
    <div>
      <h2>Stats: users {statsRes.data?.users} / orders {statsRes.data?.orders}</h2>
      <ul>{productsRes.data?.map(p => <li key={p.id}>{p.name}</li>)}</ul>
    </div>
  );
}

export default withNexusHydrationBoundary(DashboardPage);
```

Timeouts and retries (seconds):
```ts path=null start=null
const slowReport = createDefinition<{ ok: boolean }>({
  method: 'GET', endpoint: '/report', timeout: 8, retry: { count: 2, delay: 2 },
});
```

Revalidation after mutations (from a client component):
```tsx path=null start=null
'use client';
import { revalidateClientTags } from 'next-nexus/client';
import { revalidateServerTags } from 'next-nexus';

async function onSuccess() {
  await revalidateServerTags(['products']);
  revalidateClientTags(['products']);
}
```

## Definition options (overview)
- method: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE'
- endpoint: string (e.g. '/products')
- baseURL?: string (prepends endpoint)
- headers?: HeadersInit (merged; string 'null'|'undefined' removes a header)
- server?: `{ cache?: RequestCache; revalidate?: number; tags?: string[] }`
- client?: `{ revalidate?: number; tags?: string[]; cachedHeaders?: string[] }`
- timeout?: number (seconds)
- retry?: `{ count: number; delay?: number }`
- interceptors?: string[] (names of globally registered interceptors)

### Defaults
- If `server.cache` is omitted, nextâ€‘nexus defaults to `no-store`. Set `server.cache: 'force-cache'` explicitly only for static caching/ISR.
